---
- name: Copy the project files to the host
  copy:
    src: /home/ubuntu/GoldenWaste
    dest: /home/ubuntu

- name: start deploying
  become: yes
  become_user: ubuntu
  script: deploy.sh
  args:
    chdir: /home/ubuntu/GoldenWaste

#- name: Create goldenwaste folder
#  become: yes
#  become_method: sudo
#  file:
#    path: /var/www/goldenwaste
#    state: directory
#    mode: '0755'

#- name: Copy the jar file to /var/www/goldenwaste
#  become: yes
#  become_method: sudo
#  shell: cp /home/ubuntu/GoldenWaste/target/goldenWastedd-0.0.1-SNAPSHOT.jar /var/www/goldenwaste/goldenwaste.jar

#- name: Start jar file
#  become: yes
#  become_user: ubuntu
#  shell: nohup java -jar /home/ubuntu/GoldenWaste/target/goldenWastedd-0.0.1-SNAPSHOT.jar --log=stdout > ngrok.log &

#- name: copy goldenwaste.service to systemd
#  become: yes
#  become_method: sudo
#  template:
#    src: goldenwaste.service.j2
#    dest: /usr/lib/systemd/system/goldenwaste.service

#- name: Start goldenwaste.service
#  become: yes
#  become_method: sudo
#  shell: systemctl start goldenwaste.service

#- name: Enable goldenwaste.service
#  become: yes
#  become_method: sudo
#  shell: systemctl enable goldenwaste.service